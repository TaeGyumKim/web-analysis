/* 2017.05.18 탭 이슈 수정( 탭 선택시 밑으로 붙는 이슈) */
/*jQuery(function($){
	$('a[href^="#"]').click(function(){
		var $self = $(this);
		var $target = $($(this).attr('href'));

		$target.attr('tabindex', '0').show().focus();

		$target.find(".close").click(function(){
			$target.hide();
			$self.focus();
			$(this).off('click');
		});
	}); 
});*/

// tab1 ��ư function //

function tabFnc_01(n){

	var tabFncCnt = jQuery(".tabSet_cd")

	tabFncCnt.each(function(){
		var _contNumber = jQuery(this).find(".tab_cdBox").length;
		
		var _tabsetH = Math.ceil(_contNumber / 5)
		//alert(_tabsetH);
		var _tabposT = 0;
		var _tabposL = 0;
		var _defToppos = 28; // �ǹ�ư���� padding-bottom �� ������ ���� ��
		var _defLeftpos = 140; // �ǹ�ư���� padding-right �� ������ ���� ��
		var _defPT = 9; // �ǹ�ư div �� ������ ��� padding-top ��
		var _defPL = 11; // �ǹ�ư div �� ������ ���� padding-left ��

		jQuery(this).find(".tab_cd").css({"height": ((_tabsetH * _defToppos) + _defPT ) + "px"})

		for(var i=0; i < _contNumber; i++ ){
			//alert(i);
			var _tabposT = Math.ceil((i+1)/5) - 1;
			 jQuery(this).find(".tab_cdBox").eq(i).find("a.tab").css({"top": _tabposT * _defToppos + _defPT + "px","left": _tabposL * _defLeftpos + _defPL + "px"})
			if(_tabposL >= 4 ){_tabposL = 0}
			else{_tabposL = _tabposL + 1;}
			//alert(_tabposT);
		}

		// tab1 ��ư toggle //

		jQuery(this).find(".tab_cdBox").find("a.tab").click(function(){
			var _ClickCnt = jQuery(this).parent().index();
			
			jQuery(this).closest(tabFncCnt).find("a.tab img").each(
				function(){
					var img_src = jQuery(this).attr("src");
					offImg = img_src.replace("_on" , "");
					onImg = img_src.replace("_off" , "_on");
					jQuery(this).attr("src" , offImg);
				}
			)

			var img_src = jQuery(this).find("img").attr("src");
			var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

			jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
			jQuery(this).closest(tabFncCnt).find(".tab_cdBox .tab_cdCont").hide();
			jQuery(this).closest(tabFncCnt).find(".tab_cdBox .tab_cdCont").eq(_ClickCnt - 1).show();

		})

		// heading �߰� tab1 ��ư toggle //
		jQuery(this).find(".tab_cdBox").find(".tab_tit").click(function(){
			var _ClickCnt = jQuery(this).parent().index();
			
			jQuery(this).closest(tabFncCnt).find(".tab_tit img").each(
				function(){
					var img_src = jQuery(this).attr("src");
					offImg = img_src.replace("_on" , "");
					onImg = img_src.replace("_off" , "_on");
					jQuery(this).attr("src" , offImg);
				}
			)

			var img_src = jQuery(this).find("img").attr("src");
			var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

			jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
			jQuery(this).closest(tabFncCnt).find(".tab_cdBox .tab_cdCont").hide();
			jQuery(this).closest(tabFncCnt).find(".tab_cdBox .tab_cdCont").eq(_ClickCnt - 1).show();

		})

		//
		if(n == 0 || n == null){
			jQuery(this).find(".tab_cdBox").find("a.tab").eq(0).trigger("click");
			jQuery(this).find(".tab_cdBox").find(".tab_tit").eq(0).trigger("click");
		}else{
			jQuery(this).find(".tab_cdBox").find("a.tab").eq(n-1).trigger("click");
			jQuery(this).find(".tab_cdBox").find(".tab_tit").eq(n-1).trigger("click");
		}
	})

}

// tab2 ��ư function //

function tabFnc_02(n){

	if(jQuery(".tab_mnCont").find(".tabSet_mn").length == 0){

		// .tabSet_mn ���ο� �Ǵٸ� .tabSet_mn �� �������� �ʴ»��� // �⺻

		var _sub_contNumber = jQuery(".tab_mnBox" , ".tabSet_mn").length;

		var _sub_tabposL = 0;
		var _af_sub_tabposL  = 0;
		var _sub_defLeftpos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
		var _sub_defToppos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
		var _new_sub_defToppos = 0;
		var _sub_defMT = 0; // �ǹ�ư div �� ������ ��� top ��
		var new_sub_tabposL = 0;

		for(var i=0; i < _sub_contNumber; i++ ){

			_sub_tabposL = jQuery(".tab_mnBox", ".tabSet_mn").eq(i).find("a.tab img").width() -1;
			_af_sub_tabposL = jQuery(".tab_mnBox", ".tabSet_mn").eq(i + 1).find("a.tab img").width() -1;

			jQuery(".tab_mnBox").eq(i).find("a.tab").css({"top": _sub_defMT + (_new_sub_defToppos * 34) + "px","left": new_sub_tabposL + "px"})

			if(( new_sub_tabposL + _sub_tabposL) < (720 - _af_sub_tabposL - _sub_defToppos)){
				var new_sub_tabposL = _sub_tabposL + new_sub_tabposL;
				var _sub_defToppos = _new_sub_defToppos;
			}else{
				new_sub_tabposL = 0;
				_new_sub_defToppos = _sub_defToppos + 1
			}
		}

		for(var k=0; k < _new_sub_defToppos; k++){
			var tabmenBg_C = jQuery(".tabSet_mn").find(".tab_mn").eq(0).clone();
			tabmenBg_C.prependTo(".tabSet_mn");
		}

		// ��ư toggle //

		jQuery(".tab_mnBox").find("a.tab").click(function(){
			var _ClickCnt = jQuery(this).parent(".tab_mnBox").index() - _new_sub_defToppos;

			jQuery("a.tab" , ".tab_mnBox").find("img").each(
				function(){
					var img_src = jQuery(this).attr("src");
					offImg = img_src. replace("_on" , "");
					onImg = img_src.replace("_off" , "_on");
					jQuery(this).attr("src" , offImg);
				}
			)

			var img_src = jQuery(this).find("img").attr("src");
			var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

			jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
			jQuery(".tab_mnBox .tab_mnCont").hide();
			jQuery(".tab_mnBox .tab_mnCont").eq(_ClickCnt - 1).show();

		})

		jQuery(".tab_mnBox").find("a.tab").eq(0).trigger("click");

		// heading �߰���ư toggle //

		jQuery(".tab_mnBox").find(".tab_tit").click(function(){
			var _ClickCnt = jQuery(this).parent(".tab_mnBox").index() - _new_sub_defToppos;

			jQuery(".tab_tit" , ".tab_mnBox").find("img").each(
				function(){
					var img_src = jQuery(this).attr("src");
					offImg = img_src. replace("_on" , "");
					onImg = img_src.replace("_off" , "_on");
					jQuery(this).attr("src" , offImg);
				}
			)

			var img_src = jQuery(this).find("img").attr("src");
			var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

			jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
			jQuery(".tab_mnBox .tab_mnCont").hide();
			jQuery(".tab_mnBox .tab_mnCont").eq(_ClickCnt - 1).show();

		})

		jQuery(".tab_mnBox").find(".tab_tit").eq(0).trigger("click");


	}else{
		jQuery(".tab_mnCont").find(".tabSet_mn").addClass("tabSet_mni").removeClass("tabSet_mn");
		jQuery(".tab_mnCont").find(".tab_mnBox").addClass("tab_mniBox").removeClass("tab_mnBox");
		jQuery(".tab_mnCont").find("a.tab").addClass("tabi").removeClass("tab");
		jQuery(".tab_mnCont").find(".tab_mnCont").addClass("tab_mniCont").removeClass("tab_mnCont");

		//.tabSet_mn ���ο� �Ǵٸ� .tabSet_mn �� ���� 

		var _sub_contNumber = jQuery(".tab_mnBox" , ".tabSet_mn").length;

		var _sub_tabposL = 0;
		var _af_sub_tabposL  = 0;
		var _sub_defLeftpos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
		var _sub_defToppos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
		var _new_sub_defToppos = 0;
		var _sub_defMT = 0; // �ǹ�ư div �� ������ ��� top ��
		var new_sub_tabposL = 0;

		for(var i=0; i < _sub_contNumber; i++ ){

			_sub_tabposL = jQuery(".tab_mnBox", ".tabSet_mn").eq(i).find("a.tab img").width() -1;
			_af_sub_tabposL = jQuery(".tab_mnBox", ".tabSet_mn").eq(i + 1).find("a.tab img").width() -1;

			jQuery(".tab_mnBox").eq(i).find("a.tab").css({"top": _sub_defMT + (_new_sub_defToppos * 34) + "px","left": new_sub_tabposL + "px"})

			if(( new_sub_tabposL + _sub_tabposL) < (720 - _af_sub_tabposL - _sub_defToppos)){
				var new_sub_tabposL = _sub_tabposL + new_sub_tabposL;
				var _sub_defToppos = _new_sub_defToppos;
			}else{
				new_sub_tabposL = 0;
				_new_sub_defToppos = _sub_defToppos + 1
			}
		}

		for(var k=0; k < _new_sub_defToppos; k++){
			var tabmenBg_C = jQuery(".tabSet_mn").find(".tab_mn").eq(0).clone();
			tabmenBg_C.prependTo(".tabSet_mn");
		}

		// ��ư toggle //

		jQuery(".tab_mnBox").find("a.tab").click(function(){
			var _ClickCnt = jQuery(this).parent(".tab_mnBox").index() - _new_sub_defToppos;

			jQuery("a.tab" , ".tab_mnBox").find("img").each(
				function(){
					var img_src = jQuery(this).attr("src");
					offImg = img_src. replace("_on" , "");
					onImg = img_src.replace("_off" , "_on");
					jQuery(this).attr("src" , offImg);
				}
			)

			var img_src = jQuery(this).find("img").attr("src");
			var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

			jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
			jQuery(".tab_mnBox .tab_mnCont").hide();
			jQuery(".tab_mnBox .tab_mnCont").eq(_ClickCnt - 1).show();
			
			if(jQuery(this).siblings(".tab_mnCont").find(".tabSet_mni").length > 0){innerTabRepos()}
		})

		jQuery(".tab_mnBox").find("a.tab").eq(0).trigger("click");

		// heading �߰� ��ư toggle //

		jQuery(".tab_mnBox").find(".tab_tit").click(function(){
			var _ClickCnt = jQuery(this).parent(".tab_mnBox").index() - _new_sub_defToppos;

			jQuery(".tab_tit" , ".tab_mnBox").find("img").each(
				function(){
					var img_src = jQuery(this).attr("src");
					offImg = img_src. replace("_on" , "");
					onImg = img_src.replace("_off" , "_on");
					jQuery(this).attr("src" , offImg);
				}
			)

			var img_src = jQuery(this).find("img").attr("src");
			var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

			jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
			jQuery(".tab_mnBox .tab_mnCont").hide();
			jQuery(".tab_mnBox .tab_mnCont").eq(_ClickCnt - 1).show();
			
			if(jQuery(this).siblings(".tab_mnCont").find(".tabSet_mni").length > 0){innerTabRepos()}
		})

		jQuery(".tab_mnBox").find(".tab_tit").eq(0).trigger("click");


		// ���� tab_innerSet_mn_inner ����
		function innerTabRepos(){
			var insub_contNumber = jQuery(".tab_mniBox" , ".tabSet_mni").length;

			var in_sub_tabposL = 0;
			var in_af_sub_tabposL  = 0;
			var in_sub_defLeftpos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
			var in_sub_defToppos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
			var in_new_sub_defToppos = 0;
			var in_sub_defMT = 0; // �ǹ�ư div �� ������ ��� top ��
			var innew_sub_tabposL = 0;

			for(var i=0; i < insub_contNumber; i++ ){

				in_sub_tabposL = jQuery(".tab_mniBox", ".tabSet_mni").eq(i).find("a.tabi img").width() -1;
				in_af_sub_tabposL = jQuery(".tab_mniBox", ".tabSet_mni").eq(i + 1).find("a.tabi img").width() -1;

				jQuery(".tab_mniBox").eq(i).find("a.tabi").css({"top": in_sub_defMT + (in_new_sub_defToppos * 34) + "px","left": innew_sub_tabposL + "px"})

				if(( innew_sub_tabposL + in_sub_tabposL) < (720 - in_af_sub_tabposL - in_sub_defToppos)){
					var innew_sub_tabposL = in_sub_tabposL + innew_sub_tabposL;
					var in_sub_defToppos = in_new_sub_defToppos;
				}else{
					innew_sub_tabposL = 0;
					in_new_sub_defToppos = in_sub_defToppos + 1
				}
			}

			for(var k=0; k < in_new_sub_defToppos; k++){
				var intabmenBg_C = jQuery(".tabSet_mni").find(".tab_mni").eq(0).clone();
				intabmenBg_C.prependTo(".tabSet_mni");
			}

			// ��ư toggle //

			jQuery(".tab_mniBox").find("a.tabi").click(function(){
				var in_ClickCnt = jQuery(this).parent(".tab_mniBox").index() - in_new_sub_defToppos;

				jQuery("a.tabi" , ".tab_mniBox").find("img").each(
					function(){
						var img_src = jQuery(this).attr("src");
						offImg = img_src. replace("_on" , "");
						onImg = img_src.replace("_off" , "_on");
						jQuery(this).attr("src" , offImg);
					}
				)

				var img_src = jQuery(this).find("img").attr("src");
				var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

				jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
				jQuery(".tab_mniBox .tab_mniCont").hide();
				jQuery(".tab_mniBox .tab_mniCont").eq(in_ClickCnt - 1).show();

			})

			jQuery(".tab_mniBox").find("a.tabi").eq(0).trigger("click");

			// heading �߰� ��ư toggle //

			jQuery(".tab_mniBox").find(".tab_tit").click(function(){
				var in_ClickCnt = jQuery(this).parent(".tab_mniBox").index() - in_new_sub_defToppos;

				jQuery(".tab_tit" , ".tab_mniBox").find("img").each(
					function(){
						var img_src = jQuery(this).attr("src");
						offImg = img_src. replace("_on" , "");
						onImg = img_src.replace("_off" , "_on");
						jQuery(this).attr("src" , offImg);
					}
				)

				var img_src = jQuery(this).find("img").attr("src");
				var imgStts = img_src.substr( 0 , img_src.lastIndexOf('.gif') );

				jQuery(this).find("img").attr("src" , imgStts + "_on.gif")
				jQuery(".tab_mniBox .tab_mniCont").hide();
				jQuery(".tab_mniBox .tab_mniCont").eq(in_ClickCnt - 1).show();

			})

			jQuery(".tab_mniBox").find(".tab_tit").eq(0).trigger("click");

		}
	}
	
	
	if(n != null){
		jQuery(".tabSet_mn .tab_mnBox").eq(n-1).find("a.tab").trigger("click");
		jQuery(".tabSet_mn .tab_mnBox").eq(n-1).find(".tab_tit").trigger("click");
	}

}

// tab3 ��ư function //

function tabFnc_03(n){ // ���� �̻�, ���λ����� �����Ͽ� �����ٷ� ����Ʈ��, �� ù��° ��ġ�ϴ� ��ư�� css �� background ���, ��۱��

	var _sub_contNumber = jQuery(".tab_spBox").length;
	var _sub_tabposL = 0;
	var _af_sub_tabposL  = 0;
	var _sub_defLeftpos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
	var _sub_defToppos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
	var _new_sub_defToppos = 0;
	var _sub_defMT = 0; // �ǹ�ư div �� ������ ��� top ��
	var new_sub_tabposL = 0;
	var noneTabArr = [0];

	for(var i=0; i < _sub_contNumber; i++ ){

		_sub_tabposL = jQuery(".tab_spBox", ".tabSet_sp").eq(i).find("a.tabs").width() -1;
		_af_sub_tabposL = jQuery(".tab_spBox", ".tabSet_sp").eq(i + 1).find("a.tabs").width() -1;

		jQuery(".tab_spBox").eq(i).find("a.tabs").css({"top": _sub_defMT + (_new_sub_defToppos * 60) + "px","left": new_sub_tabposL + "px"})
		jQuery(".tab_spBox", ".tabSet_sp").eq(0).find("a.tabs").css({"background":"none"})

		if(( new_sub_tabposL + _sub_tabposL) < (720 - _af_sub_tabposL - _sub_defToppos)){
			var new_sub_tabposL = _sub_tabposL + new_sub_tabposL;
			var _sub_defToppos = _new_sub_defToppos;

		}else{
			new_sub_tabposL = 0;
			_new_sub_defToppos = _sub_defToppos + 1
			noneTabArr.push(i+1);
		}
	}

	for(var k=0; k < _new_sub_defToppos; k++){
		var tabmenBg_C = jQuery(".tabSet_sp").find(".tab_sp").eq(0).clone();
		tabmenBg_C.prependTo(".tabSet_sp");
	}

	// ��ư toggle //

	jQuery("a.tabs" , ".tab_spBox").click(function(){
		var _ClickCnt = jQuery(this).parent(".tab_spBox").index() - _new_sub_defToppos;

		jQuery("a.tabs" , ".tab_spBox").removeClass("on")
		jQuery("a.tabs" , ".tab_spBox").css({"background":"url('http://www.hanaskcard.com/img/wcms/tab_type_bg.gif') no-repeat 0 17px"})
		for(var m=0; m < noneTabArr.length ; m++){
			jQuery("a.tabs" , ".tab_spBox").eq(noneTabArr[m]).css({"background":"none"})
		}

		jQuery(this).addClass("on")
		jQuery(this).css({"background":"url('http://www.hanaskcard.com/img/wcms/tab_type_on_bg.gif') no-repeat top left"})

		jQuery(".tab_spBox .tab_spCont").hide();
		jQuery(".tab_spBox .tab_spCont").eq(_ClickCnt - 1).show();
		
	})

	// heading �߰� ��ư toggle //

	jQuery(".tab_tit" , ".tab_spBox").click(function(){
		var _ClickCnt = jQuery(this).parent(".tab_spBox").index() - _new_sub_defToppos;

		jQuery(".tab_tit" , ".tab_spBox").removeClass("on")
		jQuery(".tab_tit" , ".tab_spBox").css({"background":"url('http://www.hanaskcard.com/img/wcms/tab_type_bg.gif') no-repeat 0 17px"})
		for(var m=0; m < noneTabArr.length ; m++){
			jQuery(".tab_tit" , ".tab_spBox").eq(noneTabArr[m]).css({"background":"none"})
		}

		jQuery(this).addClass("on")
		jQuery(this).css({"background":"url('http://www.hanaskcard.com/img/wcms/tab_type_on_bg.gif') no-repeat top left"})

		jQuery(".tab_spBox .tab_spCont").hide();
		jQuery(".tab_spBox .tab_spCont").eq(_ClickCnt - 1).show();
		
	})

	
	if(n != null){
		jQuery(".tab_spBox").find("a.tabs").eq(n -1).trigger("click");
		jQuery(".tab_spBox").find(".tab_tit").eq(n -1).trigger("click");
	}else{
		jQuery(".tab_spBox").find("a.tabs").eq(0).trigger("click");
		jQuery(".tab_spBox").find(".tab_tit").eq(0).trigger("click");
	}
}


function tabFnc_03_1(){ // tabFnc_03()�� �����, ������ ����, ù��° ��ġ�ϴ� ��ư�� css �� background ���, ��۱��
	var _sub_contNumber = jQuery(".tab_spBox").length;
	var _sub_tabposL = 0;
	var _af_sub_tabposL  = 0;
	var _sub_defLeftpos = 0; // ���� �ǹ�ư�� ����� �����Ͽ� �����ǵ� �ǹ�ư�� x ������ ��
	var new_sub_tabposL = 0;

	for(var i=0; i < _sub_contNumber; i++ ){
		_sub_tabposL = jQuery(".tab_spBox", ".tabSet_sp").eq(i).find("a.tabs").width() -1;
		jQuery(".tab_spBox").eq(i).find("a.tabs").css({"top": 0 + "px","left": new_sub_tabposL + "px"})
		new_sub_tabposL = _sub_tabposL + new_sub_tabposL;
	}

	// ��ư toggle //

	jQuery(".tab_spBox").find("a.tabs").click(function(){
		var _ClickCnt = jQuery(this).parent(".tab_spBox").index();

		if(_ClickCnt == 1){
			jQuery("a.tabs" , ".tab_spBox").removeClass("on")
			jQuery(this).addClass("on")
			jQuery("a.tabs" , ".tab_spBox").eq(0).css({"background":"url('http://www.hanaskcard.com/img/wcms/tab_type_on_bg.gif') no-repeat top left"})
		}else{
			jQuery("a.tabs" , ".tab_spBox").removeClass("on")
			jQuery(this).addClass("on")
			jQuery("a.tabs" , ".tab_spBox").eq(0).css({"background":"none"})
		}
		jQuery(".tab_spBox .tab_spCont").hide();
		jQuery(".tab_spBox .tab_spCont").eq(_ClickCnt - 1).show();

	})

	// heading �߰� ��ư toggle //

	jQuery(".tab_spBox").find(".tab_tit").click(function(){
		var _ClickCnt = jQuery(this).parent(".tab_spBox").index();

		if(_ClickCnt == 1){
			jQuery(".tab_tit" , ".tab_spBox").removeClass("on")
			jQuery(this).addClass("on")
			jQuery(".tab_tit" , ".tab_spBox").eq(0).css({"background":"url('http://www.hanaskcard.com/img/wcms/tab_type_on_bg.gif') no-repeat top left"})
		}else{
			jQuery(".tab_tit" , ".tab_spBox").removeClass("on")
			jQuery(this).addClass("on")
			jQuery(".tab_tit" , ".tab_spBox").eq(0).css({"background":"none"})
		}
		jQuery(".tab_spBox .tab_spCont").hide();
		jQuery(".tab_spBox .tab_spCont").eq(_ClickCnt - 1).show();

	})

	jQuery(".tab_spBox").find("a.tabs").eq(0).trigger("click");
	jQuery(".tab_spBox").find(".tab_tit").eq(0).trigger("click");
}